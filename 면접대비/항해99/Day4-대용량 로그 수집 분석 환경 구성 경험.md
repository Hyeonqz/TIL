## Day4 - 테스트 코드 작성 또는 TDD 경험
### Q. 테스트 코드나 TDD 관점을 염두에 두고 개발 구조를 설계하거나 구현한 경험이 있다면 공유해 주세요. 꼭 완전한 테스트 주도 개발이 아니더라도, 테스트 가능성을 높이기 위해 고민했던 방식이 있다면 좋습니다.
기존 실무에서는 테스트 코드를 작성하지 않고 있었다 <br>
그래서 항상 postman 으로 api 를 호출하며 테스트 하였고, 위 과정에서 예외가 나올 때 마다 예외 로그를 따라가며 문제를 잡고는 했다 <br>

그래서 1개를 고치면 또 다른 1개가 에러가 나고 위와 같은 상황이 반복되어 생산성이 저하가 된다고 생각하였다 <br>
그래서 테스트 코드를 점진적으로 도입하자고 상의를 하였고, 팀원들이 흔쾌히 요청을 받아들여서, 테스트 코드 작성을 시작하였다 <br>

여러가지 테스트를 알아보다가, TDD 를 도입하기에는 테스트 초보자들 사이에서는 너무 무리였고 그래서 정의한건 아래와 같다 
- unitTest
- IntegrationTest
  - springBootTest
  - webMvcTest

총 3개로 나눠서 진행을 하기로 하였다 <br>

1번은 외부 의존성을 mock 처리한 후에 실제 비즈니스 로직을 검증하는 과정이였다 <br>
그리고 2번은 @SpringBootTest 를 사용하여 실제 Bean 을 로드하고 db 와 통신하는 테스트를 진행하였다 <br>
3번은 실제 api 를 postMan 으로 호출하지 않고 테스트 결과를 받을 수 있어 사용하였다 <br>

내가 테스트를 도입하자 했기에 여러가지 예시 테스트 코드를 제공하기 위해 내가 개발한 기능들 테스트 커버리지 100%를 완성하였다 <br>
위를 기반으로 팀원들이 참고하여 테스트코드를 하나하나 작성해나가는 중이다 <br>

아직은 테스트 코드에 유용한 아키텍쳐를 적용하지는 않았지만, 테스트 코드를 짜다보니 슬슬 테스트 코드를 쉽게 짜기 위한 코드를 짜게 되가는 중인것 같다 <br>
추후에는 클린 아키텍쳐 또는 헥사고날 아키텍쳐를 적용하며 테스트 용이성을 올려보려고 한다 <br>

추가적으로 엣지 케이스는 현재 반례가 확실한게 아니라면 작성은 안하고 있다 <br>
위 부분 또한 추가적으로 잘 도입을 해보려고 한다 <br>

좋은 개발 문화를 위해 점진적으로 나아가 보려고 한다 <br>

### 모범답안
결제 모듈 리팩토링 당시 테스트 코드가 없던 부분을 정리하면서, TDD에 가까운 방식으로 접근한 경험이 있습니다.<br>
로직을 서비스/도메인/infra로 분리하고, 도메인 계층은 외부 의존성을 제거해 테스트가 가능하도록 설계했습니다.<br>
의도적으로 먼저 실패하는 테스트를 작성하고, 통과를 위한 최소 구현 → 점진적 개선을 반복하자 코드 품질뿐 아니라 기능 안정성도 크게 높아졌습니다.<br>
이후 테스트 커버리지가 20% → 75%까지 늘었고, QA 회귀 이슈도 절반 이상 줄었습니다.<br>