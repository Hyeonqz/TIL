# Next.js 왜 두 번 렌더링 되는 거지..

회사 백오피스에서 Next.js + React.js 를 사용하고 있다 <br>
나는 백엔드가 메인이긴 하지만 그래도 어느정도 백오피스를 만들정도로 프론트를 구성할 줄 알아야했다 <br>

그리고 Next.js 를 사용하면서 백엔드와 통신을 했고 쿼리를 1번 만 날라가야 하는대 2번 씩 쿼리가 날라갔다<br>
이상하다. 분명 요청은 1번인데 왜 응답이 2번씩 오지? <br>

그래서 위 부분을 찾아본 결과 'ReactStrictMode' 때문이였다 <br>

위 설정이 개발 환경에서는 자동으로 true 설정이 되어있다 <br>
그 이유는 개발 과정에서 다양한 문제를 탐지할 수 있다고 한다 <br>

위 문제를 탐지하기 위해서 next 에서 2번씩 렌더링을 한다고 한다 <br>

- 부작용 감지
- 메모리 누수 감지

대표적으로 위 2가지가 있다 <br>

다행히도 개발 환경에서만 동작을 하고, 테스트 또는 프로덕션 환경에서는 2번씩 동작을 하지 않는다 <br>

그럼 어떻게 2번씩 렌더링 되는 것을 해결할 수 있을까?<br>
next.config.js 를 수정함으로 써 해결할 수 있다.
```typescript
const nextConfig {
	reactStrictMode: false
}
```

위 설정을 하게 되면 이제 렌더링이 1번만 되어 api 응답을 1번 만 받을 수 있다 <br>

저는 쿼리에 대한 로그를 남기게 되어있었고 백오피스 특성상 join 쿼리가 많아서 너무 많은 쿼리를 한꺼번에 보게되어서 위 설정을 off 했습니다.